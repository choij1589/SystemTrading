# ETF 투자 전략 로직

## 📊 전략 1: 글로벌 자산배분

**타입**: 정적 배분 | **리밸런싱**: 월 1회 | **리스크**: 낮음

### 포트폴리오 구성
| ETF | 자산 클래스 | 비중 |
|-----|-----------|------|
| KODEX 200 | 국내 주식 | 30% |
| TIGER 미국S&P500 | 미국 주식 | 40% |
| KODEX 국고채3년 | 채권 | 20% |
| KODEX 골드선물(H) | 금/원자재 | 10% |

### 전략 로직
```python
def get_weights(data, date):
    return {
        "069500": 0.30,  # 항상 30%
        "360750": 0.40,  # 항상 40%
        "152380": 0.20,  # 항상 20%
        "132030": 0.10   # 항상 10%
    }
```

**특징**: 고정 비중 유지, 낮은 변동성, 안정적 수익

---

## 🚀 전략 2: 모멘텀 섹터 로테이션

**타입**: 동적 배분 | **리밸런싱**: 월 1회 | **리스크**: 높음

### 투자 유니버스
8개 섹터 ETF: 반도체, 2차전지, IT, 건설, 에너지화학, 금융, 헬스케어, 미국주식

### 전략 로직
```
1. 모멘텀 점수 계산 (각 섹터별):
   momentum_3m = (현재가 - 60일전) / 60일전
   momentum_6m = (현재가 - 120일전) / 120일전
   score = 0.5 × momentum_3m + 0.5 × momentum_6m

2. 점수 기준 순위 정렬 (내림차순)

3. 상위 3개 선택 (조건: score >= 0)

4. 균등 비중 할당 (각 33.33%)

5. 선택된 섹터가 없으면 → 100% 현금 보유
```

**특징**: 트렌드 추종, 높은 수익 잠재력, 높은 변동성

---

## ⚖️ 전략 3: 배당 + 성장 혼합

**타입**: 정적 배분 | **리밸런싱**: 월 1회 | **리스크**: 중간

### 포트폴리오 구성
| ETF | 특성 | 비중 |
|-----|------|------|
| TIGER 미국배당다우존스 | 배당 수익 | 50% |
| TIGER 미국나스닥100 | 성장 | 50% |

### 전략 로직
```python
def get_weights(data, date):
    return {
        "458730": 0.50,  # 배당주 50%
        "133690": 0.50   # 성장주 50%
    }
```

**특징**: 배당 수익 + 성장, 중간 리스크, 미국 시장 집중

---

## 🔄 백테스팅 엔진

### 시뮬레이션 프로세스
```
초기: 현금 = 4,200,000원

매 거래일:
  1. 입금 체크 (월초) → 현금 += 300,000원
  2. 리밸런싱 체크 (월초)
     - 전략에서 목표 비중 조회
     - 현재 포트폴리오 가치 계산
     - 목표 주식 수 계산
     - 매도 주문 실행 (현금 확보)
     - 매수 주문 실행 (비례적 현금 배분)
  3. 포트폴리오 가치 기록

최종: 자산곡선, 거래로그, 성과지표 반환
```

### 거래 비용
- **수수료**: 0.015% (매수/매도 양쪽)
- **세금**: 0.23% (매도만)
- **Bid-ask spread**: 0.01%

### 성과 지표
- **CAGR**: 연평균 복리 수익률
- **Sharpe Ratio**: 위험 대비 수익
- **MDD**: 최대 낙폭
- **Win Rate**: 승률
